function n(r,t,s){return t in r?Object.defineProperty(r,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[t]=s,r}var C={A:{args:["rx","ry","rotation","arc","sweep","ex","ey"]},a:{args:["rx","ry","rotation","arc","sweep","ex","ey"]},C:{args:["cx1","cy1","cx2","cy2","ex","ey"]},c:{args:["cx1","cy1","cx2","cy2","ex","ey"]},H:{args:["x"]},h:{args:["x"]},L:{args:["x","y"]},l:{args:["x","y"]},M:{args:["x","y"]},m:{args:["x","y"]},Q:{args:["cx","cy","ex","ey"]},q:{args:["cx","cy","ex","ey"]},S:{args:["cx","cy","ex","ey"]},s:{args:["cx","cy","ex","ey"]},T:{args:["ex","ey"]},t:{args:["ex","ey"]},V:{args:["y"]},v:{args:["y"]},z:{args:[]}};class u{constructor(){return n(this,"attr",(t,s)=>(this.attributes[t]=s,this)),n(this,"fill",t=>this.attr("fill",t)),n(this,"stroke",t=>this.attr("stroke",t)),n(this,"strokeWidth",t=>this.attr("stroke-width",t)),n(this,"style",t=>this.attr("style",t)),n(this,"m",(t,s)=>this.moveTo(t,s,!0)),n(this,"M",(t,s)=>this.moveTo(t,s)),n(this,"moveTo",(t,s,i=!1)=>(this.pathData.push(`${i?"m":"M"}${t} ${s}`),this)),n(this,"l",(t,s)=>this.lineTo(t,s,!0)),n(this,"L",(t,s)=>this.lineTo(t,s)),n(this,"lineTo",(t,s,i=!1)=>(this.pathData.push(`${i?"l":"L"}${t} ${s}`),this)),n(this,"H",t=>this.horizontalTo(t)),n(this,"h",t=>this.horizontalTo(t,!0)),n(this,"horizontalTo",(t,s=!1)=>(this.pathData.push(`${s?"h":"H"}${t}`),this)),n(this,"V",t=>this.verticalTo(t)),n(this,"v",t=>this.verticalTo(t,!0)),n(this,"verticalTo",(t,s=!1)=>(this.pathData.push(`${s?"v":"V"}${t}`),this)),n(this,"Q",(t,s,i,h)=>this.qCurve(t,s,i,h)),n(this,"q",(t,s,i,h)=>this.qCurve(t,s,i,h,!0)),n(this,"qCurve",(t,s,i,h,o=!1)=>(this.pathData.push(`${o?"q":"Q"}${t} ${s} ${i} ${h}`),this)),n(this,"T",(t,s)=>this.tCurveTo(t,s)),n(this,"t",(t,s)=>this.tCurveTo(t,s,!0)),n(this,"tCurveTo",(t,s,i=!1)=>(this.pathData.push(`${i?"t":"T"}${t} ${s}`),this)),n(this,"C",(t,s,i,h,o,e)=>this.cCurve(t,s,i,h,o,e)),n(this,"c",(t,s,i,h,o,e)=>this.cCurve(t,s,i,h,o,e,!0)),n(this,"cCurve",(t,s,i,h,o,e,a=!1)=>(this.pathData.push(`${a?"c":"C"}${t} ${s} ${i} ${h} ${o} ${e}`),this)),n(this,"S",(t,s,i,h)=>this.sCurveTo(t,s,i,h)),n(this,"s",(t,s,i,h)=>this.sCurveTo(t,s,i,h,!0)),n(this,"sCurveTo",(t,s,i,h,o=!1)=>(this.pathData.push(`${o?"s":"S"}${t} ${s} ${i} ${h}`),this)),n(this,"A",(t,s,i,h,o,e,a)=>this.arc(t,s,i,h,o,e,a)),n(this,"a",(t,s,i,h,o,e,a)=>this.arc(t,s,i,h,o,e,a,!0)),n(this,"arc",(t,s,i,h,o,e,a,c=!1)=>(this.pathData.push(`${c?"a":"A"}${t} ${s} ${i} ${h} ${o} ${e} ${a}`),this)),n(this,"down",t=>this.v(t)),n(this,"up",t=>this.v(-1*t)),n(this,"right",t=>this.h(t)),n(this,"left",t=>this.h(-1*t)),n(this,"close",()=>(this.pathData.push("z"),this)),n(this,"toArray",()=>this.pathData),n(this,"toString",()=>this.pathData.join("")),n(this,"toCommands",()=>this.pathData.map(t=>{const s=[t.substr(0,1)],i=t.substr(1);return i.length&&s.push(...i.split(" ").map(Number)),s})),n(this,"toAnnotatedCommands",()=>this.toCommands().map(t=>{const s=t.shift(),i=C[s].args;return i.length?{fn:s,args:t.reduce((h,o,e)=>(h[i[e]]=o,h),{})}:{fn:s}})),n(this,"toElement",(t={})=>{const s={...this.attributes,...t},i=document.createElementNS("http://www.w3.org/2000/svg","path");return Object.keys(s).forEach(h=>{i.setAttribute(h,s[h])}),i.setAttribute("d",this.toString()),i}),this.pathData=[],this.attributes={},this}}n(u,"angleInRadians",r=>r*Math.PI/180),n(u,"polarToCartesian",(r,t,s,i)=>{const h=u.angleInRadians(i);return{x:r+s*Math.cos(h),y:t+s*Math.sin(h)}}),n(u,"clockwisePoint",(r,t,s,i)=>{const h=i-90;return u.polarToCartesian(r,t,s,h)}),n(u,"radialPoints",(r,t,s,i,h,o=1)=>{h=h||-.5*Math.PI,r=r||1e-10;const e=2*Math.PI*o/i,a=Array.from(Array(i>=0?i:0).keys()),c=Math.max(0,4-Math.floor(Math.log10(r)));return a.map((l,y)=>{const p=y*e+h;return[(t+r*Math.cos(p)).toFixed(c),(s+r*Math.sin(p)).toFixed(c)]})}),n(u,"positionByArray",(r,t,s,i)=>{const h=[],o=r/2;return t.forEach((e,a)=>{e.forEach((c,l)=>{c&&h.push({size:r,cx:l*r+o+s,cy:a*r+o+i,ri:a,ci:l,value:c})})}),h}),n(u,"macro",(r,t)=>{u.prototype[r]=t}),u.macro("rect",function(r,t,s,i,h=!0){return this.M(s-r/2,i-t/2).right(r).down(t).left(r).up(t),h&&this.M(s,i),this}),u.macro("square",function(r,t,s,i=!0){return this.rect(r,r,t,s,i)}),u.macro("roundedSquare",function(r,t,s,i,h=!0){return this.roundedRect(r,r,t,s,i,h)}),u.macro("roundedRect",function(r,t,s,i,h,o=!0){const e=h-t/2,a=i-r/2,c=a+r,l=e+t;let y=Math.min(s,r/2);y=y<0?0:y;let p=Math.min(s,t/2);p=p<0?0:p;const f=Math.max(r-2*y,0),M=Math.max(t-2*p,0);return this.M(a+y,e).right(f).A(y,p,0,0,1,c,e+p).down(M).A(y,p,0,0,1,c-y,l).left(f).A(y,p,0,0,1,a,l-p).up(M).A(y,p,0,0,1,a+y,e).M(a,e),o&&this.M(i,h),this}),u.macro("circle",function(r,t,s,i=!0){return this.ellipse(r,r,t,s,i)}),u.macro("ellipse",function(r,t,s,i,h=!0){const o=r/2,e=t/2;return this.M(s+o,i).A(o,e,0,0,1,s-o,i).A(o,e,0,0,1,s+o,i).close(),h&&this.M(s,i),this}),u.macro("isocube",function(r,t,s,i=!0){this.regPolygon(r,6,t,s,i);const h=this.constructor.radialPoints(0,t,s,6),o=this.constructor.radialPoints(r/2,t,s,6);return[1,3,5].forEach(e=>{this.M(h[e][0],h[e][1]).L(o[e][0],o[e][1])}),i&&this.M(t,s),this}),u.macro("kite",function(r,t,s,i,h,o=!0){s=s||parseInt(.33*t,10);const[e,a,c]=this.constructor.radialPoints(t/2,i,h,4),l=parseInt(e[1],10)+s,y=[e,[i-r/2,l],c,[i+r/2,l]];return this.polyline(y).close()}),u.macro("lens",function(r,t,s,i,h=!0){return this.M(s-r/2,i).Q(s,i-t,s+r/2,i).Q(s,i+t,s-r/2,i),h&&this.M(s,i),this}),u.macro("polyline",function(r,t=!1){const s=[...r],i=s.shift(),h=t?this.m:this.M,o=t?this.l:this.L;return h.apply(null,i),s.forEach(e=>{o.apply(null,e)}),this}),u.macro("polygon",function(r){return this.polyline(r).close(),this}),u.macro("regPolygon",function(r,t,s,i,h=!0){return this.polygon(this.constructor.radialPoints(r/2,s,i,t)),h&&this.M(s,i),this}),u.macro("polygram",function(r,t,s,i,h=2,o=!0){return this.polygon(this.constructor.radialPoints(r/2,s,i,t,null,h)),o&&this.M(s,i),this}),u.macro("radialLines",function(r,t,s,i,h,o=!0){const e=this.constructor.radialPoints(t/2,i,h,s),a=this.constructor.radialPoints(r/2,i,h,s);return e.forEach((c,l)=>{this.M(c[0],c[1]).L(a[l][0],a[l][1])}),o&&this.M(i,h),this}),u.macro("star",function(r,t,s,i,h,o=!0){const e=t/2,a=r/2,c=360/(2*s),l=Array.from({length:2*s}).map((y,p)=>{let f=p%2==0?a:e,M=c*p;const{x:g,y:x}=this.constructor.clockwisePoint(i,h,f,M,o);return[g,x]});return this.polygon(l),o&&this.M(i,h),this}),u.macro("triangle",function(r,t,s,i=!0){const h=Math.sqrt(3),o=[t,s-h/3*r],e=[t-r/2,s+h/6*r],a=[t+r/2,s+h/6*r];return this.polygon([o,e,a]),i&&this.M(t,s),this}),u.macro("sector",function(r,t,s,i,h,o=!0){const e=s/2,a=this.constructor.clockwisePoint(r,t,e,h),c=this.constructor.clockwisePoint(r,t,e,i),l=h-i<=180?0:1;return this.M(a.x,a.y).A(e,e,0,l,0,c.x,c.y).L(r,t).L(a.x,a.y),o&&this.M(r,t),this}),u.macro("segment",function(r,t,s,i,h,o=!0){const e=s/2,a=this.constructor.clockwisePoint(r,t,e,h),c=this.constructor.clockwisePoint(r,t,e,i),l=h-i<=180?0:1;return this.M(a.x,a.y).A(e,e,0,l,0,c.x,c.y),o&&this.M(r,t),this}),u.macro("cross",function(r,t,s,i,h=!0){const o=s-r/2,e=o+r,a=i-t/2,c=a+t;return this.M(o,i).L(e,i).M(s,c).L(s,a),h&&this.M(s,i),this}),u.macro("symH",function(r,t,s,i,h=!0){const o=s-r/2,e=o+r,a=i-t/2,c=a+t;return this.M(o,a).L(o,c).M(o,i).L(e,i).M(e,a).L(e,c),h&&this.M(s,i),this}),u.macro("symI",function(r,t,s,i,h=!0){const o=s-r/2,e=o+r,a=i-t/2,c=a+t;return this.M(o,a).L(e,a).M(s,a).L(s,c).M(o,c).L(e,c),h&&this.M(s,i),this}),u.macro("symV",function(r,t,s,i,h=!0){const o=s-r/2,e=o+r,a=i-t/2,c=a+t;return this.M(o,a).L(s,c).L(e,a),h&&this.M(s,i),this}),u.macro("symX",function(r,t,s,i,h=!0){const o=s-r/2,e=o+r,a=i-t/2,c=a+t;return this.M(o,a).L(e,c).M(o,c).L(e,a),h&&this.M(s,i),this}),u.macro("omino",function(r,t,s,i,h=!1){return this.constructor.positionByArray(r,t,s,i).forEach((o,e,a)=>{const{cx:c,cy:l,ri:y,ci:p,size:f}=o,M=f/2,g=a.find(m=>m.ri===y&&m.ci===p-1),x=a.find(m=>m.ri===y&&m.ci===p+1),v=a.find(m=>m.ri===y-1&&m.ci===p),T=a.find(m=>m.ri===y+1&&m.ci===p),$=c-M,L=c+M,d=l-M,A=l+M;g&&!h||(this.M($,d),this.v(f)),x||(this.M(L,d),this.v(f)),v&&!h||(this.M($,d),this.h(f)),T||(this.M($,A),this.h(f))}),this});export{u as i};
