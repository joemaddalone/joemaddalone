<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><link rel="icon" type="image/x-icon" href="/assets/favicon.ico"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.12.5"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="apple-touch-icon" sizes="57x57" href="/assets/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link href="//unpkg.com/prismjs@1.20.0/themes/prism.css" rel="stylesheet"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/fill/style.css"><title></title><link rel="stylesheet" href="/_astro/_slug_.C-kwXQhI.css"></head> <body> <div class="sticky top-0 z-50 bg-white/80 shadow-md"> <nav class="flex items-center justify-between text-black h-12"> <a class="mt1 ml-1" href="/"> <img src="/assets/favicon-32x32.png" width="32" height="32" alt=""> </a> </nav> </div>  <div class="content-container section-spacing"> <div class="prose
	prose-invert
  prose-h1:font-bold prose-h1:text-xl
	prose-body:text-black prose-body:text-base
	prose-headings:text-black
	prose-p:text-black
	prose-code:text-black
	prose-code:bg-inherit
	prose-code:font-thin
	prose-code:text-xs
	prose-code:italic
	prose-code:before:content-none
	prose-code:after:content-none
	prose-ul:list-disc prose-ul:pl-4
	prose-strong:text-black
	prose-ruby:text-black
	prose-li:text-black">   <hgroup>
	<h1>DSPy Signatures</h1>
	<p>DSPy signatures in ax-llm.</p>
</hgroup>
<h2 id="the-problem-with-prompts">The problem with prompts</h2>
<p>Here is an example of a prompt for identifying topics in a given text.</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.4dupk.css"><script type="module" src="/_astro/ec.p1z7b.js"></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#A2447B">const</span><span style="--0:#565869"> prompt </span><span style="--0:#646670">=</span><span style="--0:#565869"> </span><span style="--0:#646670">`</span></div></div><div class="ec-line"><div class="code"><span style="--0:#816100">Analyze the text.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#816100">Return a list of topics and the sentiment of the text.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#816100">Format your response as JSON with keys: sentiment, topics</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#816100">Review: </span><span style="--0:#646670">${</span><span style="--0:#565869">review</span><span style="--0:#646670">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#646670">`</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const prompt = &#x60;Analyze the text.Return a list of topics and the sentiment of the text.Format your response as JSON with keys: sentiment, topicsReview: ${review}&#x60;"><div></div></button></div></figure></div>
<p>And here is a code example I ran:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#A2447B">import</span><span style="--0:#565869"> ollama </span><span style="--0:#A2447B">from</span><span style="--0:#565869"> </span><span style="--0:#646670">'</span><span style="--0:#816100">ollama</span><span style="--0:#646670">'</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#A2447B">const</span><span style="--0:#565869"> system </span><span style="--0:#646670">=</span><span style="--0:#565869"> </span><span style="--0:#646670">`</span><span style="--0:#816100">Analyze the text.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#816100">Return a list of topics and the sentiment of the text.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#816100">Format your response as JSON with keys: sentiment, topics</span><span style="--0:#646670">`</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#A2447B">const</span><span style="--0:#565869"> review </span><span style="--0:#646670">=</span><span style="--0:#565869"> </span><span style="--0:#646670">`</span></div></div><div class="ec-line"><div class="code"><span style="--0:#816100">I purchased a Widget from Amazon. Shipping was delayed.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#816100">I was displeased and will not purchase again.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#646670">`</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#A2447B">const</span><span style="--0:#565869"> response </span><span style="--0:#646670">=</span><span style="--0:#565869"> </span><span style="--0:#A2447B">await</span><span style="--0:#565869"> ollama</span><span style="--0:#646670">.</span><span style="--0:#066C9F">chat</span><span style="--0:#646670">({</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#11658F">model</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">'</span><span style="--0:#816100">gpt-oss:latest</span><span style="--0:#646670">'</span><span style="--0:#646670">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#11658F">messages</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">[</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#646670">{</span><span style="--0:#565869"> </span><span style="--0:#11658F">role</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">'</span><span style="--0:#816100">system</span><span style="--0:#646670">'</span><span style="--0:#646670">,</span><span style="--0:#565869"> </span><span style="--0:#11658F">content</span><span style="--0:#646670">:</span><span style="--0:#565869"> system </span><span style="--0:#646670">},</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#646670">{</span><span style="--0:#565869"> </span><span style="--0:#11658F">role</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">'</span><span style="--0:#816100">user</span><span style="--0:#646670">'</span><span style="--0:#646670">,</span><span style="--0:#565869"> </span><span style="--0:#11658F">content</span><span style="--0:#646670">:</span><span style="--0:#565869"> review </span><span style="--0:#646670">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#646670">],</span></div></div><div class="ec-line"><div class="code"><span style="--0:#646670">})</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">console</span><span style="--0:#646670">.</span><span style="--0:#066C9F">log</span><span style="--0:#646670">(</span><span style="--0:#565869">JSON</span><span style="--0:#646670">.</span><span style="--0:#066C9F">parse</span><span style="--0:#646670">(</span><span style="--0:#565869">response</span><span style="--0:#646670">.</span><span style="--0:#565869">message</span><span style="--0:#646670">.</span><span style="--0:#565869">content</span><span style="--0:#646670">))</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import ollama from &#x27;ollama&#x27;const system = &#x60;Analyze the text.Return a list of topics and the sentiment of the text.Format your response as JSON with keys: sentiment, topics&#x60;const review = &#x60;I purchased a Widget from Amazon. Shipping was delayed.I was displeased and will not purchase again.&#x60;const response = await ollama.chat({  model: &#x27;gpt-oss:latest&#x27;,  messages: [    { role: &#x27;system&#x27;, content: system },    { role: &#x27;user&#x27;, content: review }  ],})console.log(JSON.parse(response.message.content))"><div></div></button></div></figure></div>
<p>This is the actual result with gpt:oss (including the ```json …)</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#646670">```</span><span style="--0:#816100">json</span></div></div><div class="ec-line"><div class="code"><span style="--0:#816100">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#816100">  </span></span><span style="--0:#816100">"sentiment": "negative",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#816100">  </span></span><span style="--0:#816100">"topics": [</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#816100">    </span></span><span style="--0:#816100">"purchase",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#816100">    </span></span><span style="--0:#816100">"Amazon",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#816100">    </span></span><span style="--0:#816100">"shipping delay",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#816100">    </span></span><span style="--0:#816100">"displeasure",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#816100">    </span></span><span style="--0:#816100">...</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="&#x60;&#x60;&#x60;json{  &#x22;sentiment&#x22;: &#x22;negative&#x22;,  &#x22;topics&#x22;: [    &#x22;purchase&#x22;,    &#x22;Amazon&#x22;,    &#x22;shipping delay&#x22;,    &#x22;displeasure&#x22;,    ..."><div></div></button></div></figure></div>
<p>So of course we get:</p>
<div class="expressive-code"><figure class="frame is-terminal"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="bash"><code><div class="ec-line"><div class="code"><span style="--0:#066C9F">SyntaxError:</span><span style="--0:#565869"> </span><span style="--0:#816100">JSON</span><span style="--0:#565869"> </span><span style="--0:#816100">Parse</span><span style="--0:#565869"> </span><span style="--0:#816100">error:</span><span style="--0:#565869"> </span><span style="--0:#816100">Unrecognized</span><span style="--0:#565869"> </span><span style="--0:#816100">token</span><span style="--0:#565869"> </span><span style="--0:#646670">'</span><span style="--0:#816100">`</span><span style="--0:#646670">'</span><span style="--0:#565869"> </span><span style="--0:#816100">at</span><span style="--0:#565869"> </span><span style="--0:#816100">/....ts:17:18</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="SyntaxError: JSON Parse error: Unrecognized token &#x27;&#x60;&#x27; at /....ts:17:18"><div></div></button></div></figure></div>
<p>And now we can futz around with our prompt or the output… or not.</p>
<h2 id="enter-dspy-signatures">Enter DSPy signatures</h2>
<p>DSPy signatures are a structured way to define the expected inputs and outputs for language models.
t it;s simplest it’s a typed input and a typed output delimited by <code>-></code></p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#565869">input:type -> output:type</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="input:type -> output:type"><div></div></button></div></figure></div>
<p>Multiple inputs or outputs can be comma delimited, so in our case:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#565869">review:string => sentiment:string, topics:string[]</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="review:string => sentiment:string, topics:string[]"><div></div></button></div></figure></div>
<p>Each field can also be followed by a description</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#565869">review:string "User review" -></span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">sentiment:string "Sentiment of review",</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">topics:string[] "Main topics discussed"</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="review:string &#x22;User review&#x22; ->sentiment:string &#x22;Sentiment of review&#x22;,topics:string[] &#x22;Main topics discussed&#x22;"><div></div></button></div></figure></div>
<p>And finally we can provide an enum for something like sentiment using a “class” type.</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#565869">review:string "User review" -></span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">sentiment:class "positive, neutral, negative",</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">topics:string[] "Main topics discussed"</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="review:string &#x22;User review&#x22; ->sentiment:class &#x22;positive, neutral, negative&#x22;,topics:string[] &#x22;Main topics discussed&#x22;"><div></div></button></div></figure></div>
<h2 id="ax-llm-dspy-for-typescript">Ax-llm (DSPy for TypeScript)</h2>
<p><a href="https://axllm.dev/">Ax-llm</a> allows us to use DSPy in (and for) Typescript.</p>
<div class="expressive-code"><figure class="frame has-title"><figcaption class="header"><span class="title">Dspy+Ollama in Ax</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#A2447B">import</span><span style="--0:#565869"> </span><span style="--0:#646670">{</span><span style="--0:#565869"> ai</span><span style="--0:#646670">,</span><span style="--0:#565869"> ax </span><span style="--0:#646670">}</span><span style="--0:#565869"> </span><span style="--0:#A2447B">from</span><span style="--0:#565869"> </span><span style="--0:#646670">"</span><span style="--0:#816100">@ax-llm/ax</span><span style="--0:#646670">"</span><span style="--0:#646670">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#A2447B">const</span><span style="--0:#565869"> llm </span><span style="--0:#646670">=</span><span style="--0:#565869"> </span><span style="--0:#066C9F">ai</span><span style="--0:#646670">({</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#11658F">name</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">"</span><span style="--0:#816100">ollama</span><span style="--0:#646670">"</span><span style="--0:#646670">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#11658F">apiKey</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">"</span><span style="--0:#816100">not-set</span><span style="--0:#646670">"</span><span style="--0:#646670">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#11658F">url</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">"</span><span style="--0:#816100">http://localhost:11434/v1</span><span style="--0:#646670">"</span><span style="--0:#646670">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#11658F">config</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">{</span><span style="--0:#565869"> </span><span style="--0:#11658F">model</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">"</span><span style="--0:#816100">gpt-oss:latest</span><span style="--0:#646670">"</span><span style="--0:#565869"> </span><span style="--0:#646670">},</span></div></div><div class="ec-line"><div class="code"><span style="--0:#646670">});</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#A2447B">const</span><span style="--0:#565869"> analyzer </span><span style="--0:#646670">=</span><span style="--0:#565869"> </span><span style="--0:#066C9F">ax</span><span style="--0:#646670">(</span><span style="--0:#646670">`</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#816100">  </span></span><span style="--0:#816100">review:string "User review" -></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#816100">  </span></span><span style="--0:#816100">sentiment:class "positive, neutral, negative",</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#816100">  </span></span><span style="--0:#816100">topics:string[] "Main topics discussed"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#646670">`</span><span style="--0:#646670">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#A2447B">const</span><span style="--0:#565869"> review </span><span style="--0:#646670">=</span><span style="--0:#565869"> </span><span style="--0:#646670">`</span></div></div><div class="ec-line"><div class="code"><span style="--0:#816100">I purchased a Widget from Amazon. Shipping was delayed.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#816100">I was displeased and will not purchase again.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#646670">`</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#A2447B">const</span><span style="--0:#565869"> result </span><span style="--0:#646670">=</span><span style="--0:#565869"> </span><span style="--0:#A2447B">await</span><span style="--0:#565869"> analyzer</span><span style="--0:#646670">.</span><span style="--0:#066C9F">forward</span><span style="--0:#646670">(</span><span style="--0:#565869">llm</span><span style="--0:#646670">,</span><span style="--0:#565869"> </span><span style="--0:#646670">{</span><span style="--0:#565869"> </span><span style="--0:#11658F">review</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">});</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">console</span><span style="--0:#646670">.</span><span style="--0:#066C9F">log</span><span style="--0:#646670">(</span><span style="--0:#565869">response</span><span style="--0:#646670">.</span><span style="--0:#565869">sentiment</span><span style="--0:#646670">)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">console</span><span style="--0:#646670">.</span><span style="--0:#066C9F">log</span><span style="--0:#646670">(</span><span style="--0:#565869">response</span><span style="--0:#646670">.</span><span style="--0:#565869">topics</span><span style="--0:#646670">)</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#646670">// negative</span></div></div><div class="ec-line"><div class="code"><span style="--0:#646670">// ["product", "shipping", "Amazon", "customer satisfaction"]</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { ai, ax } from &#x22;@ax-llm/ax&#x22;;const llm = ai({  name: &#x22;ollama&#x22;,  apiKey: &#x22;not-set&#x22;,  url: &#x22;http://localhost:11434/v1&#x22;,  config: { model: &#x22;gpt-oss:latest&#x22; },});const analyzer = ax(&#x60;  review:string &#x22;User review&#x22; ->  sentiment:class &#x22;positive, neutral, negative&#x22;,  topics:string[] &#x22;Main topics discussed&#x22;&#x60;);const review = &#x60;I purchased a Widget from Amazon. Shipping was delayed.I was displeased and will not purchase again.&#x60;const result = await analyzer.forward(llm, { review: });console.log(response.sentiment)console.log(response.topics)// negative// [&#x22;product&#x22;, &#x22;shipping&#x22;, &#x22;Amazon&#x22;, &#x22;customer satisfaction&#x22;]"><div></div></button></div></figure></div>
<p>And we can debug this process to see what has happened:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#565869">[ CHAT REQUEST Step 0 ]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">────────────────────────────────────────────────────────────</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#565869">[ SYSTEM ]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">You will be provided with the following fields: `Review`. Your task</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">is to generate new fields: `Sentiment`, `Topics`.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#565869">## Input Fields</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">Review: (A string field) User review.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#565869">## Output Fields</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">Sentiment: (This classification class field must be included) Allowed</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">values: positive, neutral, negative</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">Topics: (This json array of string items field must be included) Main topics discussed.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#565869">## Strict Output Formatting Rules</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">- No formatting rules should override these **Strict Output Formatting Rules**</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">- Output must strictly follow the defined plain-text `field name: value` field format.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">- Output field, values must strictly adhere to the specified output field formatting rules.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">- Do not include fields with empty, unknown, or placeholder values.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">- Do not add any text before or after the output fields, just the field name and value.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">- Do not use code blocks.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">────────────────────────────────────────────────────────────</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#565869">[ USER ]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">Review:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">I purchased a Widget from Amazon. Shipping was delayed.</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">I was displeased and will not purchase again.</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#565869">────────────────────────────────────────────────────────────</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#565869">[ CHAT RESPONSE ]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">────────────────────────────────────────────────────────────</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#565869">Sentiment: negative</span></div></div><div class="ec-line"><div class="code"><span style="--0:#565869">Topics: ["product", "shipping", "Amazon", "customer satisfaction"]</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="[ CHAT REQUEST Step 0 ]────────────────────────────────────────────────────────────[ SYSTEM ]You will be provided with the following fields: &#x60;Review&#x60;. Your taskis to generate new fields: &#x60;Sentiment&#x60;, &#x60;Topics&#x60;.## Input FieldsReview: (A string field) User review.## Output FieldsSentiment: (This classification class field must be included) Allowedvalues: positive, neutral, negativeTopics: (This json array of string items field must be included) Main topics discussed.## Strict Output Formatting Rules- No formatting rules should override these **Strict Output Formatting Rules**- Output must strictly follow the defined plain-text &#x60;field name: value&#x60; field format.- Output field, values must strictly adhere to the specified output field formatting rules.- Do not include fields with empty, unknown, or placeholder values.- Do not add any text before or after the output fields, just the field name and value.- Do not use code blocks.────────────────────────────────────────────────────────────[ USER ]Review:I purchased a Widget from Amazon. Shipping was delayed.I was displeased and will not purchase again.────────────────────────────────────────────────────────────[ CHAT RESPONSE ]────────────────────────────────────────────────────────────Sentiment: negativeTopics: [&#x22;product&#x22;, &#x22;shipping&#x22;, &#x22;Amazon&#x22;, &#x22;customer satisfaction&#x22;]"><div></div></button></div></figure></div>
<p>And what happend is our DSPy signature was tranformed into an awesome system prompt we did not have to write.</p>   </div> </div>  <footer class="content-container page-footer"> <div class="border-t-1 border-gray-200 flex justify-between pt-6 pb-6 text-xs"> <div>I'm Joe Maddalone</div> <div><i>This is not a blog, these pages are changed all the time.</i></div> </div> </footer> </body></html>