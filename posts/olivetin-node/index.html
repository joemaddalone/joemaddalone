<!DOCTYPE html><meta charset="utf-8"><hgroup>
	<h1>OliveTin Node</h1>
	<p>olivetin + docker + nvm</p>
</hgroup>
<p><em><a href="https://www.olivetin.app/">OliveTin</a> gives safe and simple access to predefined shell commands from a web interface.</em></p>
<p>Technically OliveTin is mean for making a nice little panel of buttons that do whatever you want.  I also use it as a script runner since those actions can be tied to cron schedules.</p>
<p>I use nvm and it made it slightly trickier to get OliveTin (running in docker) to access my code.</p>
<h2 id="docker-compose">docker-compose</h2>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.4dupk.css"><script type="module" src="/_astro/ec.p1z7b.js"></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="yaml"><code><div class="ec-line"><div class="code"><span style="--0:#11658F">version</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">"</span><span style="--0:#816100">3.3</span><span style="--0:#646670">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#11658F">services</span><span style="--0:#646670">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#11658F">olivetin</span><span style="--0:#646670">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#11658F">container_name</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#816100">olivetin</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#11658F">image</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#816100">jamesread/olivetin</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#11658F">volumes</span><span style="--0:#646670">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#646670">-</span><span style="--0:#565869"> </span><span style="--0:#816100">${APPDATADIR}/OliveTin:/config</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#646670">       </span></span><span style="--0:#646670"># this gets us to node</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#646670">-</span><span style="--0:#565869"> </span><span style="--0:#816100">/home/username/.nvm/versions/node/v20.10.0/bin:/node</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#646670">       </span></span><span style="--0:#646670"># this gets us to my code</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#646670">-</span><span style="--0:#565869"> </span><span style="--0:#816100">/path/to/projects:/projects</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#11658F">ports</span><span style="--0:#646670">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#646670">-</span><span style="--0:#565869"> </span><span style="--0:#646670">"</span><span style="--0:#816100">1337:1337</span><span style="--0:#646670">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#11658F">restart</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#816100">unless-stopped</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="version: &#x22;3.3&#x22;services:  olivetin:    container_name: olivetin    image: jamesread/olivetin    volumes:      - ${APPDATADIR}/OliveTin:/config       # this gets us to node      - /home/username/.nvm/versions/node/v20.10.0/bin:/node       # this gets us to my code      - /path/to/projects:/projects    ports:      - &#x22;1337:1337&#x22;    restart: unless-stopped"><div></div></button></div></figure></div>
<h2 id="olivetin-configyml">OliveTin config.yml</h2>
<p>Now in our OliveTin config we can just:</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="yaml"><code><div class="ec-line"><div class="code"><span style="--0:#11658F">listenAddressSingleHTTPFrontend</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#816100">0.0.0.0:1337</span></div></div><div class="ec-line"><div class="code"><span style="--0:#11658F">logLevel</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">"</span><span style="--0:#816100">INFO</span><span style="--0:#646670">"</span></div></div><div class="ec-line"><div class="code"><span style="--0:#646670">-</span><span style="--0:#565869"> </span><span style="--0:#11658F">title</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#816100">Do The Thing</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#11658F">shell</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#646670">"</span><span style="--0:#816100">/node/node /projects/myscript/index.mjs</span><span style="--0:#646670">"</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#11658F">timeout</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#B1403C">60</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#11658F">icon</span><span style="--0:#646670">:</span><span style="--0:#565869"> </span><span style="--0:#816100">backup</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#11658F">execOnCron</span><span style="--0:#646670">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#646670">-</span><span style="--0:#565869"> </span><span style="--0:#646670">"</span><span style="--0:#816100">0 0 */8 * * *</span><span style="--0:#646670">"</span><span style="--0:#565869"> </span><span style="--0:#646670"># At minute 0 past every 8th hour</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="listenAddressSingleHTTPFrontend: 0.0.0.0:1337logLevel: &#x22;INFO&#x22;- title: Do The Thing  shell: &#x22;/node/node /projects/myscript/index.mjs&#x22;  timeout: 60  icon: backup  execOnCron:    - &#x22;0 0 */8 * * *&#x22; # At minute 0 past every 8th hour"><div></div></button></div></figure></div>