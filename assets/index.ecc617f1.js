var j=Object.defineProperty;var D=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var k=(o,t,s)=>t in o?j(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s,T=(o,t)=>{for(var s in t||(t={}))Q.call(t,s)&&k(o,s,t[s]);if(D)for(var s of D(t))H.call(t,s)&&k(o,s,t[s]);return o};import"./modulepreload-polyfill.b7f2da20.js";/* empty css              */function a(o,t,s){return t in o?Object.defineProperty(o,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[t]=s,o}var F={A:{args:["rx","ry","rotation","arc","sweep","ex","ey"]},a:{args:["rx","ry","rotation","arc","sweep","ex","ey"]},C:{args:["cx1","cy1","cx2","cy2","ex","ey"]},c:{args:["cx1","cy1","cx2","cy2","ex","ey"]},H:{args:["x"]},h:{args:["x"]},L:{args:["x","y"]},l:{args:["x","y"]},M:{args:["x","y"]},m:{args:["x","y"]},Q:{args:["cx","cy","ex","ey"]},q:{args:["cx","cy","ex","ey"]},S:{args:["cx","cy","ex","ey"]},s:{args:["cx","cy","ex","ey"]},T:{args:["ex","ey"]},t:{args:["ex","ey"]},V:{args:["y"]},v:{args:["y"]},z:{args:[]}};class u{constructor(){return a(this,"attr",(t,s)=>(this.attributes[t]=s,this)),a(this,"fill",t=>this.attr("fill",t)),a(this,"stroke",t=>this.attr("stroke",t)),a(this,"strokeWidth",t=>this.attr("stroke-width",t)),a(this,"style",t=>this.attr("style",t)),a(this,"m",(t,s)=>this.moveTo(t,s,!0)),a(this,"M",(t,s)=>this.moveTo(t,s)),a(this,"moveTo",(t,s,i=!1)=>(this.pathData.push(`${i?"m":"M"}${t} ${s}`),this)),a(this,"l",(t,s)=>this.lineTo(t,s,!0)),a(this,"L",(t,s)=>this.lineTo(t,s)),a(this,"lineTo",(t,s,i=!1)=>(this.pathData.push(`${i?"l":"L"}${t} ${s}`),this)),a(this,"H",t=>this.horizontalTo(t)),a(this,"h",t=>this.horizontalTo(t,!0)),a(this,"horizontalTo",(t,s=!1)=>(this.pathData.push(`${s?"h":"H"}${t}`),this)),a(this,"V",t=>this.verticalTo(t)),a(this,"v",t=>this.verticalTo(t,!0)),a(this,"verticalTo",(t,s=!1)=>(this.pathData.push(`${s?"v":"V"}${t}`),this)),a(this,"Q",(t,s,i,h)=>this.qCurve(t,s,i,h)),a(this,"q",(t,s,i,h)=>this.qCurve(t,s,i,h,!0)),a(this,"qCurve",(t,s,i,h,n=!1)=>(this.pathData.push(`${n?"q":"Q"}${t} ${s} ${i} ${h}`),this)),a(this,"T",(t,s)=>this.tCurveTo(t,s)),a(this,"t",(t,s)=>this.tCurveTo(t,s,!0)),a(this,"tCurveTo",(t,s,i=!1)=>(this.pathData.push(`${i?"t":"T"}${t} ${s}`),this)),a(this,"C",(t,s,i,h,n,r)=>this.cCurve(t,s,i,h,n,r)),a(this,"c",(t,s,i,h,n,r)=>this.cCurve(t,s,i,h,n,r,!0)),a(this,"cCurve",(t,s,i,h,n,r,e=!1)=>(this.pathData.push(`${e?"c":"C"}${t} ${s} ${i} ${h} ${n} ${r}`),this)),a(this,"S",(t,s,i,h)=>this.sCurveTo(t,s,i,h)),a(this,"s",(t,s,i,h)=>this.sCurveTo(t,s,i,h,!0)),a(this,"sCurveTo",(t,s,i,h,n=!1)=>(this.pathData.push(`${n?"s":"S"}${t} ${s} ${i} ${h}`),this)),a(this,"A",(t,s,i,h,n,r,e)=>this.arc(t,s,i,h,n,r,e)),a(this,"a",(t,s,i,h,n,r,e)=>this.arc(t,s,i,h,n,r,e,!0)),a(this,"arc",(t,s,i,h,n,r,e,c=!1)=>(this.pathData.push(`${c?"a":"A"}${t} ${s} ${i} ${h} ${n} ${r} ${e}`),this)),a(this,"down",t=>this.v(t)),a(this,"up",t=>this.v(-1*t)),a(this,"right",t=>this.h(t)),a(this,"left",t=>this.h(-1*t)),a(this,"close",()=>(this.pathData.push("z"),this)),a(this,"toArray",()=>this.pathData),a(this,"toString",()=>this.pathData.join("")),a(this,"toCommands",()=>this.pathData.map(t=>{const s=[t.substr(0,1)],i=t.substr(1);return i.length&&s.push(...i.split(" ").map(Number)),s})),a(this,"toAnnotatedCommands",()=>this.toCommands().map(t=>{const s=t.shift(),i=F[s].args;return i.length?{fn:s,args:t.reduce((h,n,r)=>(h[i[r]]=n,h),{})}:{fn:s}})),a(this,"toElement",(t={})=>{const s=T(T({},this.attributes),t),i=document.createElementNS("http://www.w3.org/2000/svg","path");return Object.keys(s).forEach(h=>{i.setAttribute(h,s[h])}),i.setAttribute("d",this.toString()),i}),this.pathData=[],this.attributes={},this}}a(u,"angleInRadians",o=>o*Math.PI/180),a(u,"polarToCartesian",(o,t,s,i)=>{const h=u.angleInRadians(i);return{x:o+s*Math.cos(h),y:t+s*Math.sin(h)}}),a(u,"clockwisePoint",(o,t,s,i)=>{const h=i-90;return u.polarToCartesian(o,t,s,h)}),a(u,"radialPoints",(o,t,s,i,h,n=1)=>{h=h||-.5*Math.PI,o=o||1e-10;const r=2*Math.PI*n/i,e=Array.from(Array(i>=0?i:0).keys()),c=Math.max(0,4-Math.floor(Math.log10(o)));return e.map((l,m)=>{const y=m*r+h;return[(t+o*Math.cos(y)).toFixed(c),(s+o*Math.sin(y)).toFixed(c)]})}),a(u,"positionByArray",(o,t,s,i)=>{const h=[],n=o/2;return t.forEach((r,e)=>{r.forEach((c,l)=>{c&&h.push({size:o,cx:l*o+n+s,cy:e*o+n+i,ri:e,ci:l,value:c})})}),h}),a(u,"macro",(o,t)=>{u.prototype[o]=t}),u.macro("rect",function(o,t,s,i,h=!0){return this.M(s-o/2,i-t/2).right(o).down(t).left(o).up(t),h&&this.M(s,i),this}),u.macro("square",function(o,t,s,i=!0){return this.rect(o,o,t,s,i)}),u.macro("roundedSquare",function(o,t,s,i,h=!0){return this.roundedRect(o,o,t,s,i,h)}),u.macro("roundedRect",function(o,t,s,i,h,n=!0){const r=h-t/2,e=i-o/2,c=e+o,l=r+t;let m=Math.min(s,o/2);m=m<0?0:m;let y=Math.min(s,t/2);y=y<0?0:y;const g=Math.max(o-2*m,0),M=Math.max(t-2*y,0);return this.M(e+m,r).right(g).A(m,y,0,0,1,c,r+y).down(M).A(m,y,0,0,1,c-m,l).left(g).A(m,y,0,0,1,e,l-y).up(M).A(m,y,0,0,1,e+m,r).M(e,r),n&&this.M(i,h),this}),u.macro("circle",function(o,t,s,i=!0){return this.ellipse(o,o,t,s,i)}),u.macro("ellipse",function(o,t,s,i,h=!0){const n=o/2,r=t/2;return this.M(s+n,i).A(n,r,0,0,1,s-n,i).A(n,r,0,0,1,s+n,i).close(),h&&this.M(s,i),this}),u.macro("kite",function(o,t,s,i,h,n=!0){s=s||parseInt(.33*t,10);const[r,e,c]=this.constructor.radialPoints(t/2,i,h,4),l=parseInt(r[1],10)+s,m=[r,[i-o/2,l],c,[i+o/2,l]];return this.polyline(m).close()}),u.macro("lens",function(o,t,s,i,h=!0){return this.M(s-o/2,i).Q(s,i-t,s+o/2,i).Q(s,i+t,s-o/2,i),h&&this.M(s,i),this}),u.macro("polyline",function(o,t=!1){const s=[...o],i=s.shift(),h=t?this.m:this.M,n=t?this.l:this.L;return h.apply(null,i),s.forEach(r=>{n.apply(null,r)}),this}),u.macro("polygon",function(o){return this.polyline(o).close(),this}),u.macro("regPolygon",function(o,t,s,i,h=!0){return this.polygon(this.constructor.radialPoints(o/2,s,i,t)),h&&this.M(s,i),this}),u.macro("polygram",function(o,t,s,i,h=2,n=!0){return this.polygon(this.constructor.radialPoints(o/2,s,i,t,null,h)),n&&this.M(s,i),this}),u.macro("radialLines",function(o,t,s,i,h,n=!0){const r=this.constructor.radialPoints(t/2,i,h,s),e=this.constructor.radialPoints(o/2,i,h,s);return r.forEach((c,l)=>{this.M(c[0],c[1]).L(e[l][0],e[l][1])}),n&&this.M(i,h),this}),u.macro("star",function(o,t,s,i,h,n=!0){const r=t/2,e=o/2,c=360/(2*s),l=Array.from({length:2*s}).map((m,y)=>{let g=y%2==0?e:r,M=c*y;const{x:$,y:v}=this.constructor.clockwisePoint(i,h,g,M,n);return[$,v]});return this.polygon(l),n&&this.M(i,h),this}),u.macro("triangle",function(o,t,s,i=!0){const h=Math.sqrt(3),n=[t,s-h/3*o],r=[t-o/2,s+h/6*o],e=[t+o/2,s+h/6*o];return this.polygon([n,r,e]),i&&this.M(t,s),this}),u.macro("sector",function(o,t,s,i,h,n=!0){const r=s/2,e=this.constructor.clockwisePoint(o,t,r,h),c=this.constructor.clockwisePoint(o,t,r,i),l=h-i<=180?0:1;return this.M(e.x,e.y).A(r,r,0,l,0,c.x,c.y).L(o,t).L(e.x,e.y),n&&this.M(o,t),this}),u.macro("segment",function(o,t,s,i,h,n=!0){const r=s/2,e=this.constructor.clockwisePoint(o,t,r,h),c=this.constructor.clockwisePoint(o,t,r,i),l=h-i<=180?0:1;return this.M(e.x,e.y).A(r,r,0,l,0,c.x,c.y),n&&this.M(o,t),this}),u.macro("cross",function(o,t,s,i,h=!0){const n=s-o/2,r=n+o,e=i-t/2,c=e+t;return this.M(n,i).L(r,i).M(s,c).L(s,e),h&&this.M(s,i),this}),u.macro("symH",function(o,t,s,i,h=!0){const n=s-o/2,r=n+o,e=i-t/2,c=e+t;return this.M(n,e).L(n,c).M(n,i).L(r,i).M(r,e).L(r,c),h&&this.M(s,i),this}),u.macro("symI",function(o,t,s,i,h=!0){const n=s-o/2,r=n+o,e=i-t/2,c=e+t;return this.M(n,e).L(r,e).M(s,e).L(s,c).M(n,c).L(r,c),h&&this.M(s,i),this}),u.macro("symX",function(o,t,s,i,h=!0){const n=s-o/2,r=n+o,e=i-t/2,c=e+t;return this.M(n,e).L(r,c).M(n,c).L(r,e),h&&this.M(s,i),this}),u.macro("omino",function(o,t,s,i,h=!1){return this.constructor.positionByArray(o,t,s,i).forEach((n,r,e)=>{const{cx:c,cy:l,ri:m,ci:y,size:g}=n,M=g/2,$=e.find(p=>p.ri===m&&p.ci===y-1),v=e.find(p=>p.ri===m&&p.ci===y+1),S=e.find(p=>p.ri===m-1&&p.ci===y),z=e.find(p=>p.ri===m+1&&p.ci===y),w=c-M,B=c+M,C=l-M,R=l+M;$&&!h||(this.M(w,C),this.v(g)),v||(this.M(B,C),this.v(g)),S&&!h||(this.M(w,C),this.h(g)),z||(this.M(w,R),this.h(g))}),this});const O=document.getElementById("ex3"),V=O.getContext("2d"),N=new Path2D(new u().triangle(70,150,50).toString());V.stroke(N);let A=0,P=0,d=1,x=1;const L=20,b=L/2,f=document.getElementById("ex4"),q=f.getContext("2d");f.getBoundingClientRect();const E=(o,t)=>o+L>t||o<0,I=()=>{q.clearRect(0,0,f.width,f.height),x=E(P+x,f.height)?-x:x,d=E(A+d,f.width)?-d:d,A+=d,P+=x;const o=new u().square(L,A+b,P+b).toString();q.stroke(new Path2D(o)),requestAnimationFrame(I)};I();
